#  Fall 2023
#  Team Members:    JhihYang Wu, Andres Galvez, Shawn Kim
#  % Effort    :       JW: 33%,     AG: 33%,      SK: 33%
#
# ECE369A,  
# 

########################################################################################################################
### data
########################################################################################################################
.data
# test input
# asize : dimensions of the frame [i, j] and window [k, l]
#         i: number of rows,  j: number of cols
#         k: number of rows,  l: number of cols  
# frame : frame data with i*j number of pixel values
# window: search window with k*l number of pixel values
#
# $v0 is for row / $v1 is for column


# test 1 For the 64X64 frame and a 4X4 window size
# ans: 1b 22
asize1: .word    64,   64,   4,   4    #i,   j,   k,   l
frame1: .word 255,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  
	.word 240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  250,  
	.word 242,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  236,  249,  
	.word 243,  234,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  230,  235,  248,  
	.word 244,  235,  234,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  232,  229,  234,  247,  
	.word 245,  236,  235,  242,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  242,  231,  228,  233,  246,  
	.word 246,  237,  236,  243,  228,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  227,  230,  241,  230,  227,  232,  245,  
	.word 247,  238,  237,  244,  229,  252,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  226,  229,  240,  229,  226,  231,  244,  
	.word 248,  239,  238,  245,  230,  253,  254,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  230,  225,  228,  239,  228,  225,  230,  243,  
	.word 249,  240,  239,  246,  231,  254,  225,  234,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  
	.word 250,  241,  240,  247,  232,  225,  226,  235,  252,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  
	.word 251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  
	.word 252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  
	.word 253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  
	.word 254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  
	.word 225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  
	.word 226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  
	.word 227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  236,  249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  
	.word 228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  234,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  230,  235,  248,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  
	.word 229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  244,  235,  234,  240,  101,  101,  101,  101,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  232,  229,  234,  247,  238,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  
	.word 230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  232,  245,  236,  235,  242,  101,  101,  101,  101,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  242,  231,  228,  233,  246,  237,  236,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  
	.word 231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  228,  233,  246,  237,  236,  243,  101,  101,  101,  101,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  227,  230,  241,  230,  227,  232,  245,  236,  235,  242,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  
	.word 232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  232,  229,  234,  247,  238,  237,  244,  101,  101,  101,  101,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  226,  229,  240,  229,  226,  231,  244,  235,  234,  241,  226,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  
	.word 233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  244,  233,  230,  235,  248,  239,  238,  245,  230,  253,  254,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  230,  225,  228,  239,  228,  225,  230,  243,  234,  233,  240,  225,  248,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  
	.word 234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  234,  245,  234,  231,  236,  249,  240,  239,  246,  231,  254,  225,  234,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  233,  232,  239,  254,  247,  248,  227,  244,  239,  242,  253,  242,  239,  244,  227,  
	.word 235,  226,  225,  232,  247,  240,  241,  250,  237,  232,  235,  246,  235,  232,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  232,  231,  238,  253,  246,  247,  226,  243,  238,  241,  252,  241,  238,  243,  226,  
	.word 236,  227,  226,  233,  248,  241,  242,  251,  238,  233,  236,  247,  236,  233,  238,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  231,  230,  237,  252,  245,  246,  225,  242,  237,  240,  251,  240,  237,  242,  225,  
	.word 237,  228,  227,  234,  249,  242,  243,  252,  239,  234,  237,  248,  237,  234,  239,  252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  232,  231,  230,  229,  228,  227,  226,  225,  100,  100,  100,  100,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  230,  229,  236,  251,  244,  245,  254,  241,  236,  239,  250,  239,  236,  241,  254,  
	.word 238,  229,  228,  235,  250,  243,  244,  253,  240,  235,  238,  249,  238,  235,  240,  253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  252,  251,  250,  249,  248,  247,  246,  100,  99,  100,  100,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  229,  228,  235,  250,  243,  244,  253,  240,  235,  238,  249,  238,  235,  240,  253,  
	.word 239,  230,  229,  236,  251,  244,  245,  254,  241,  236,  239,  250,  239,  236,  241,  254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  250,  249,  248,  120,  120,  245,  100,  100,  99,  100,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  228,  227,  234,  249,  242,  243,  252,  239,  234,  237,  248,  237,  234,  239,  252,  
	.word 240,  231,  230,  237,  252,  245,  246,  225,  242,  237,  240,  251,  240,  237,  242,  225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  226,  225,  120,  120,  120,  100,  100,  100,  100,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  227,  226,  233,  248,  241,  242,  251,  238,  233,  236,  247,  236,  233,  238,  251,  
	.word 241,  232,  231,  238,  253,  246,  247,  226,  243,  238,  241,  252,  241,  238,  243,  226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  240,  239,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  226,  225,  232,  247,  240,  241,  250,  237,  232,  235,  246,  235,  232,  237,  250,  
	.word 242,  233,  232,  239,  254,  247,  248,  227,  244,  239,  242,  253,  242,  239,  244,  227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  101,  120,  120,  120,  120,  120,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  234,  245,  234,  231,  236,  249,  
	.word 243,  234,  233,  240,  225,  248,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  120,  120,  120,  120,  120,  120,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  244,  233,  230,  235,  248,  
	.word 244,  235,  234,  241,  226,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  120,  120,  120,  120,  120,  120,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  232,  229,  234,  247,  
	.word 245,  236,  235,  242,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  229,  120,  120,  120,  120,  120,  120,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  228,  233,  246,  
	.word 246,  237,  236,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  233,  234,  120,  120,  120,  120,  120,  120,  241,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  232,  245,  
	.word 247,  238,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  245,  246,  247,  120,  120,  120,  101,  252,  253,  254,  225,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  244,  
	.word 248,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  
	.word 249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  227,  244,  239,  242,  253,  242,  239,  244,  227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  
	.word 250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  226,  225,  232,  247,  240,  241,  250,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  243,  238,  241,  252,  241,  238,  243,  226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  
	.word 251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  227,  226,  233,  248,  241,  242,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  237,  240,  251,  240,  237,  242,  225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  
	.word 252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  228,  227,  234,  249,  242,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  239,  250,  239,  236,  241,  254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  
	.word 253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  229,  228,  235,  250,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  249,  238,  235,  240,  253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  
	.word 254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  230,  229,  236,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  237,  234,  239,  252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  
	.word 225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  231,  230,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  233,  238,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  
	.word 226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  232,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  
	.word 227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  
	.word 228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  
	.word 229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  
	.word 230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  243,  102,  102,  102,  102,  248,  243,  246,  227,  246,  243,  248,  231,  
	.word 231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  102,  102,  102,  102,  247,  242,  245,  226,  245,  242,  247,  230,  
	.word 232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  102,  102,  102,  102,  246,  241,  244,  225,  244,  241,  246,  229,  
	.word 233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  102,  102,  102,  102,  245,  240,  243,  254,  243,  240,  245,  228,  
	.word 234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  227,  244,  239,  242,  253,  242,  239,  244,  227,  
	.word 235,  226,  225,  232,  247,  240,  241,  250,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  243,  238,  241,  252,  241,  238,  243,  226,  
	.word 236,  227,  226,  233,  248,  241,  242,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  237,  240,  251,  240,  237,  242,  225,  
	.word 237,  228,  227,  234,  249,  242,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  239,  250,  239,  236,  241,  254,  
	.word 238,  229,  228,  235,  250,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  249,  238,  235,  240,  253,  
	.word 239,  230,  229,  236,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  237,  234,  239,  252,  
	.word 240,  231,  230,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  233,  238,  251,  
	.word 241,  232,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  237,  250,  
	.word 242,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  249,  
	.word 243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247
                  
window1: .word    99,  99,  99,  99,   
          .word    99,  99,  99,  99,   
          .word    99,  99,  99,  99,   
           .word   99,  99,  99,  99
			




         
newline: .asciiz     "\n" 


########################################################################################################################
### main
########################################################################################################################

.text

.globl main

main:
    addi    $sp, $sp, -4    # Make space on stack
    sw      $ra, 0($sp)     # Save return address
         
    # Start test 1 
    ############################################################
    addi      $a0, $zero, 0     # 1st parameter: address of asize1[0]
    addi      $a1, $zero, 16     # 2nd parameter: address of frame1[0]
    addi      $a2, $zero, 16400    # 3rd parameter: address of window1[0] 
   
    jal     vbsme           # call function

end_program:                    # remain in infinite loop
	j end_program

# Begin subroutine
vbsme:  
    addi      $v0, $zero, 0              # reset $v0 and $V1
    addi      $v1, $zero, 0

    # insert your code here
    # int, int vbsme(int[] sizes, int[] frame, int[] window) {
    #     int minSAD = infinity;
    #     for every position {
    #         if(position will have out of bounds) continue;
    #         int thisSAD = calculateSAD(position);
    #         if (thisSAD < minSAD) {
    #             minSAD = thisSAD;
    #             v0 = this pos;
    #             v1 = this pos;
    #         }
    #     }  
    # }

    # === Code to find every position ===
    # int i = 0; int j = 0;
    # int direction = 1;  // 1 is up, 0 is down.
    # printf("%d, ", *arr);
    # while (1) {
    #     compute SAD and potentially replace min
    #     if (i == numRows - windowHeight && j == numCols - windowWidth) {
    #         break;
    #     }
    #     int nextI;
    #     int nextJ;
    #     if (direction) {
    #         nextI = i - 1;
    #         nextJ = j + 1;
    #     } else {
    #         nextI = i + 1;
    #         nextJ = j - 1;
    #     }
    #     // Check if out of bounds. If nextIJ out of bounds, switch direction.
    #     if (nextI < 0 || nextI >= numRows - windowHeight + 1 || nextJ < 0 || nextJ >= numCols - windowWidth + 1) {
    #         if (i == 0 && j != numCols - windowWidth) {
    #             // Go right.
    #             j += 1;
    #         } else if (j == numCols - windowWidth) {
    #             // Go down.
    #             i += 1;
    #         } else if (j == 0 && i != numRows - windowHeight) {
    #             // Go down.
    #             i += 1;
    #         } else {
    #             // Go right.
    #             j += 1;
    #         }
    #         direction = !direction;
    #     } else {
    #         i = nextI;
    #         j = nextJ;
    #     }
    #     printf("%d, ", *(arr + i * numCols + j));
    # }

    addi $s0, $zero, -1          # s0 = minSAD = 0x1111_1111
    srl  $s0, $s0, 1             # minSAD = 0x7111_1111 = largest pos int
    add  $s1, $zero, $zero       # s1 = i = 0
    add  $s2, $zero, $zero       # s2 = j = 0
    addi $s3, $zero, 1           # s3 = direction = 1
    lw   $s6, 0($a0)             # s6 = numRows
    lw   $s7, 4($a0)             # s7 = numCols
    lw   $s4, 8($a0)             # s4 = windowHeight
    lw   $s5, 12($a0)            # s5 = windowWidth
    sub  $s4, $s6, $s4           # s4 = numRows - windowHeight
    sub  $s5, $s7, $s5           # s5 = numCols - windowWidth
VBSME_WHILE:
    # === compute SAD ===
    addi $t0, $s7, 0             # t0 = numCols
    mul $t9, $s1, $t0            # t9 = i * numCols
    add  $t9, $t9, $s2           # t9 = i * numCols + j
    sll  $t9, $t9, 2             # t9 = (i * numCols + j) * 4
    add  $t9, $t9, $a1           # t9 = frame + (i * numCols + j) * 4
    j    SAD_ROUTINE
SAD_DONE:
    # ===================
    slt  $t0, $s0, $t9           # t0 = minSAD < thisSAD
    bne  $t0, $zero, NEXT_POS    # if (minSAD < thisSAD == true) skip if block
    add  $s0, $zero, $t9         # minSad = thisSad
    add  $v0, $zero, $s1         # v0 = i
    add  $v1, $zero, $s2         # v1 = j
NEXT_POS:
    sub  $t0, $s1, $s4           # t0 = i - (numRows - windowHeight)
    sub  $t1, $s2, $s5           # t1 = j - (numCols - windowWidth)
    bne  $t0, $zero, DONT_EXIT   # not last row, don't exit
    bne  $t1, $zero, DONT_EXIT   # not last col, don't exit
    j    EXIT_VBSME_WHILE        # last row last col, exit loop
DONT_EXIT:
    # === find next pos ===
    beq  $s3, $zero, NEXTIJ_ELSE # if (direction == false) go to else block
    addi $t0, $s1, -1            # t0 = nextI = i - 1
    addi $t1, $s2, 1             # t1 = nextJ = j + 1
    j    AFTER_NEXTIJ
NEXTIJ_ELSE:
    addi $t0, $s1, 1             # t0 = nextI = i + 1
    addi $t1, $s2, -1            # t1 = nextJ = j - 1
AFTER_NEXTIJ:
    slt  $t2, $t0, $zero         # t2 = nextI < 0
    bne  $t2, $zero, CHANGE_DIR  # if (nextI < 0 == true) jump in if block
    addi $t3, $s4, 1             # t3 = numRows - windowHeight + 1
    slt  $t2, $t0, $t3           # t2 = nextI < numRows - windowHeight + 1
    beq  $t2, $zero, CHANGE_DIR  # if (nextI < (numRows - windowHeight + 1) == false) jump in if block
    slt  $t2, $t1, $zero         # t2 = nextJ < 0
    bne  $t2, $zero, CHANGE_DIR  # if (nextJ < 0 == true) jump in if block
    addi $t3, $s5, 1             # t3 = numCols - windowWidth + 1
    slt  $t2, $t1, $t3           # t2 = nextJ < numCols - windowWidth + 1
    beq  $t2, $zero, CHANGE_DIR  # if (nextJ < (numCols - windowWidth + 1) == false) jump in if block
    add  $s1, $zero, $t0         # i = nextI
    add  $s2, $zero, $t1         # j = nextJ
    j    VBSME_WHILE             # Go back to top of loop
CHANGE_DIR:
    beq  $s2, $s5, GO_DOWN       # i, j at last column, have to go down
    bne  $s2, $zero, GO_RIGHT    # if (j != 0) have to go right now
    beq  $s1, $s4, GO_RIGHT      # if (i == numRows - windowHeight) have to go right now
    beq  $s1, $zero, GO_RIGHT    # if (i == 0) go right now because j == 0 here as well
    j    GO_DOWN
GO_RIGHT:
    addi $s2, $s2, 1             # j += 1
    j    AFTER_GO_DOWN
GO_DOWN:
    addi $s1, $s1, 1             # i += 1
AFTER_GO_DOWN:
    xori $s3, $s3, 0x1           # direction = !direction
    # =====================
    j    VBSME_WHILE
EXIT_VBSME_WHILE:
    jr   $ra
   


# int task1(int[][] frame, int[][] window, int row_pos, int col_pos, int f_rows,
#     int f_cols, int w_rows, int w_cols)
# {
#   int SAD = 0;
#   for (int i = row_pos; i < row_pos + w_rows; i++)
#   {
#     for (int j = col_pos; j < col_pos + w_cols; j++)
#     {
#       SAD = SAD + abs(frame[i][j] - window[i][j]);
#     }
#   }
#   return SAD;
# }
SAD_ROUTINE:
    add     $t0,    $zero,  $zero       # t0 = SAD

    add     $t1,    $zero,  $zero       # t1 = window_row_counter
    add     $t2,    $zero,  $zero,      # t2 = window_col_counter

    lw      $t3,    8($a0)              # t3 = window_row_length
    lw      $t4,    12($a0)             # t4 = window_col_length

    lw      $t5,    4($a0)
    sll     $t5,    $t5,    2
    sll     $t7,    $t4,    2
    sub     $t5,    $t5,    $t7         # t5 = frame_next_row_offset

    add     $t6,    $a2,    $zero       # t6 = window_pos

    # t9 = frame_pos
    # t7, t8 are used as needed

SAD_ROUTINE_LOOP_OUTER:
    slt     $t7,    $t1,    $t3         # window_row_counter < window_row_length ?
    beq     $t7,    $zero,  EXIT_SAD_ROUTINE    # if not, then exit sad routine
SAD_ROUTINE_LOOP_INNER:
    slt     $t7,    $t2,    $t4         # window_col_counter < window_col_length ?
    beq     $t7,    $zero,  EXIT_INNER_LOOP  # if not, then exit inner loop
    lw      $t7,    0($t9)              # t7 = frame[i][j]
    lw      $t8,    0($t6)              # t8 = window[i][j]
    slt     $s6,    $t7,    $t8         # frame[i][j] < window[i][j] ?
    beq     $s6,    $zero,  ABS_OPT     # if not frame[i][j] < window[i][j], go ABS_OPT
    sub     $s6,    $t8,    $t7         # s6 = window[i][j] - frame[i][j]
    j       ABS_RES
ABS_OPT:
    sub     $s6,    $t7,    $t8         # s6 = frame[i][j] - window[i][j]
ABS_RES:
    add     $t0,    $t0,    $s6         # SAD += ABS
    addi    $t2,    $t2,    1           # window_col_counter += 1
    addi    $t9,    $t9,    4           # frame_pos += 1
    addi    $t6,    $t6,    4           # window_pos += 1
    j       SAD_ROUTINE_LOOP_INNER
EXIT_INNER_LOOP:
    addi    $t1,    $t1,    1           # window_row_counter += 1
    add     $t2,    $zero,  $zero       # window_col_counter = 0
    add     $t9,    $t9,    $t5         # set frame_pos to next row

    j       SAD_ROUTINE_LOOP_OUTER
EXIT_SAD_ROUTINE:
    add     $t9,    $zero,  $t0         # move SAD to t9
    j       SAD_DONE
